<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¢ç´¢ä¼™ä¼´ - AIå­¦ä¹ åŠ©æ‰‹æ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 0;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .demo-flow {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .step {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 10px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            flex: 1;
            min-width: 280px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .step:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .step.active {
            border: 3px solid #667eea;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .step-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .step h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .step p {
            color: #666;
            line-height: 1.6;
        }

        .demo-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            margin-top: 30px;
        }

        .section {
            display: none;
            margin-bottom: 40px;
        }

        .section.active {
            display: block;
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .file-upload {
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            background: #f8f9fa;
        }

        .file-upload:hover {
            background: #e3f2fd;
            border-color: #1976d2;
        }

        .file-upload.dragover {
            background: #e8f5e8;
            border-color: #4caf50;
        }

        .file-upload input[type="file"] {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .file-upload .upload-text {
            font-size: 18px;
            color: #666;
            margin-bottom: 10px;
        }

        .file-upload .upload-hint {
            font-size: 14px;
            color: #999;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .result {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .result.show {
            display: block;
        }

        .result h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .result pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.4;
        }

        .result .json-data {
            background: white;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            padding: 15px;
            color: #333;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .media-player {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: center;
        }

        .media-player audio,
        .media-player video {
            width: 100%;
            max-width: 600px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .download-btn {
            background: #28a745;
            margin: 10px;
        }

        .download-btn:hover {
            background: #218838;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .error.show {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 15px 0;
            display: none;
        }

        .progress-bar.show {
            display: block;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .demo-flow {
                flex-direction: column;
            }

            .step {
                margin: 10px 0;
            }

            .demo-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¦• æ¢ç´¢ä¼™ä¼´</h1>
            <p>AIé©±åŠ¨çš„å„¿ç«¥å­¦ä¹ åŠ©æ‰‹ - è®©å¥½å¥‡å¿ƒå˜æˆæ·±åº¦æ¢ç´¢</p>
        </div>

        <div class="demo-flow">
            <div class="step" data-step="1">
                <div class="step-number">1</div>
                <h3>åˆ›å»ºé¡¹ç›®</h3>
                <p>å¼€å¯ä½ çš„æ¢ç´¢ä¹‹æ—…</p>
            </div>
            <div class="step" data-step="2">
                <div class="step-number">2</div>
                <h3>è§‚å¯Ÿåˆ†æ</h3>
                <p>ä¸Šä¼ å›¾ç‰‡ï¼ŒAIæ™ºèƒ½è¯†åˆ«</p>
            </div>
            <div class="step" data-step="3">
                <div class="step-number">3</div>
                <h3>æé—®å¼•å¯¼</h3>
                <p>AIç”Ÿæˆä¸ªæ€§åŒ–é—®é¢˜</p>
            </div>
            <div class="step" data-step="4">
                <div class="step-number">4</div>
                <h3>å†…å®¹æ¶¦è‰²</h3>
                <p>ä¼˜åŒ–è¡¨è¾¾å’Œç¬”è®°</p>
            </div>
            <div class="step" data-step="5">
                <div class="step-number">5</div>
                <h3>è¯­éŸ³äº¤äº’</h3>
                <p>è¯­éŸ³è½¬æ–‡å­—å¤„ç†</p>
            </div>
            <div class="step" data-step="6">
                <div class="step-number">6</div>
                <h3>ç”ŸæˆæŠ¥å‘Š</h3>
                <p>åˆ›å»ºç ”ç©¶æŠ¥å‘Š</p>
            </div>
            <div class="step" data-step="7">
                <div class="step-number">7</div>
                <h3>è§†é¢‘åˆ†æ</h3>
                <p>AIåˆ†æè§†é¢‘å†…å®¹</p>
            </div>
            <div class="step" data-step="8">
                <div class="step-number">8</div>
                <h3>è§†é¢‘åˆ›ä½œ</h3>
                <p>ç”ŸæˆAIæ•™å­¦è§†é¢‘</p>
            </div>
        </div>

        <div class="demo-content">
            <!-- åˆ›å»ºé¡¹ç›® -->
            <div class="section active" id="section-1">
                <h2>ğŸ¯ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ¢ç´¢é¡¹ç›®</h2>
                <p style="color: #666; margin-bottom: 30px;">è®©æˆ‘ä»¬ä¸ºå°æ˜çš„æé¾™æ¢ç´¢ä¹‹æ—…åˆ›å»ºä¸€ä¸ªé¡¹ç›®å§ï¼</p>

                <div class="form-group">
                    <label for="project-title">é¡¹ç›®æ ‡é¢˜</label>
                    <input type="text" id="project-title" value="å°æ˜çš„æé¾™æ¢ç´¢ä¹‹æ—…" placeholder="è¾“å…¥é¡¹ç›®æ ‡é¢˜">
                </div>

                <div class="form-group">
                    <label for="project-desc">é¡¹ç›®æè¿°</label>
                    <textarea id="project-desc" placeholder="æè¿°è¿™ä¸ªæ¢ç´¢é¡¹ç›®çš„ç›®æ ‡å’Œå†…å®¹">è·Ÿéšå°æ˜ä¸€èµ·æ¢ç´¢å¤è€çš„æé¾™ä¸–ç•Œï¼Œå‘ç°æé¾™çš„å¥¥ç§˜ï¼Œå­¦ä¹ å¤ç”Ÿç‰©çŸ¥è¯†ã€‚</textarea>
                </div>

                <div class="form-group">
                    <label for="project-category">é¡¹ç›®åˆ†ç±»</label>
                    <select id="project-category">
                        <option value="dinosaur">æé¾™æ¢ç´¢</option>
                        <option value="space">å¤ªç©ºæ¢ç´¢</option>
                        <option value="ocean">æµ·æ´‹æ¢é™©</option>
                        <option value="nature">è‡ªç„¶è§‚å¯Ÿ</option>
                        <option value="science">ç§‘å­¦å®éªŒ</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="project-tags">é¡¹ç›®æ ‡ç­¾ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</label>
                    <input type="text" id="project-tags" value="æé¾™,å¤ç”Ÿç‰©,æ¢ç´¢" placeholder="è¾“å…¥æ ‡ç­¾ï¼Œå¦‚ï¼šæé¾™,æ¢ç´¢,å­¦ä¹ ">
                </div>

                <button class="btn" onclick="createProject()">åˆ›å»ºé¡¹ç›®</button>

                <div class="result" id="result-1">
                    <h3>åˆ›å»ºç»“æœ</h3>
                    <div class="json-data" id="result-content-1"></div>
                </div>
            </div>

            <!-- å›¾ç‰‡åˆ†æ -->
            <div class="section" id="section-2">
                <h2>ğŸ” ç¬¬äºŒæ­¥ï¼šè§‚å¯Ÿåˆ†æ - ä¸Šä¼ å›¾ç‰‡</h2>
                <p style="color: #666; margin-bottom: 30px;">ä¸Šä¼ ä¸€å¼ æé¾™å›¾ç‰‡ï¼Œè®©AIå¸®ä½ åˆ†æå’Œè¯†åˆ«ï¼</p>

                <div class="form-group">
                    <label>é€‰æ‹©å›¾ç‰‡æ–‡ä»¶</label>
                    <div class="file-upload" id="image-upload">
                        <input type="file" id="image-file" accept="image/*" onchange="handleFileSelect(this)">
                        <div class="upload-text">ğŸ“¸ ç‚¹å‡»é€‰æ‹©å›¾ç‰‡æˆ–æ‹–æ‹½åˆ°æ­¤å¤„</div>
                        <div class="upload-hint">æ”¯æŒ JPGã€PNGã€GIF æ ¼å¼</div>
                    </div>
                    <div id="image-preview" style="margin-top: 20px; display: none;">
                        <img id="preview-img" style="max-width: 300px; max-height: 300px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    </div>
                </div>

                <div class="form-group">
                    <label for="analysis-prompt">åˆ†ææç¤ºï¼ˆå¯é€‰ï¼‰</label>
                    <textarea id="analysis-prompt" placeholder="æè¿°ä½ æƒ³è®©AIåˆ†æä»€ä¹ˆï¼Œæ¯”å¦‚ï¼šè¯·åˆ†æè¿™å¼ å›¾ç‰‡ä¸­çš„æé¾™ç§ç±»ã€ç‰¹å¾å’Œä¹ æ€§">è¯·åˆ†æè¿™å¼ æé¾™å›¾ç‰‡ï¼Œè¯†åˆ«æé¾™ç§ç±»ï¼Œæè¿°å…¶ç‰¹å¾ã€ä¹ æ€§å’Œç”Ÿå­˜ç¯å¢ƒã€‚</textarea>
                </div>

                <button class="btn" onclick="analyzeImage()" id="analyze-btn">å¼€å§‹åˆ†æ</button>

                <div class="progress-bar" id="progress-2">
                    <div class="progress-fill"></div>
                </div>

                <div class="result" id="result-2">
                    <h3>åˆ†æç»“æœ</h3>
                    <div class="json-data" id="result-content-2"></div>
                </div>
            </div>

            <!-- é—®é¢˜ç”Ÿæˆ -->
            <div class="section" id="section-3">
                <h2>â“ ç¬¬ä¸‰æ­¥ï¼šæé—®å¼•å¯¼ - ç”Ÿæˆæ¢ç´¢é—®é¢˜</h2>
                <p style="color: #666; margin-bottom: 30px;">åŸºäºå›¾ç‰‡åˆ†æç»“æœï¼ŒAIä¼šä¸ºä½ ç”Ÿæˆæœ‰è¶£çš„é—®é¢˜ï¼</p>

                <div class="form-group">
                    <label for="user-age">ç”¨æˆ·å¹´é¾„</label>
                    <select id="user-age">
                        <option value="6">6å²</option>
                        <option value="7">7å²</option>
                        <option value="8" selected>8å²</option>
                        <option value="9">9å²</option>
                        <option value="10">10å²</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="context-info">è§‚å¯Ÿä¿¡æ¯</label>
                    <textarea id="context-info" placeholder="æè¿°ä½ è§‚å¯Ÿåˆ°çš„å†…å®¹">å°æ˜è§‚å¯Ÿåˆ°äº†ä¸€å—ä¿å­˜å®Œå¥½çš„ä¸‰è§’é¾™åŒ–çŸ³ï¼Œä¸Šé¢æœ‰ä¸‰åªè§’å’Œé¢ˆéƒ¨éª¨æ¿ï¼Œçœ‹èµ·æ¥éå¸¸å¨æ­¦ã€‚</textarea>
                </div>

                <button class="btn" onclick="generateQuestions()">ç”Ÿæˆé—®é¢˜</button>

                <div class="result" id="result-3">
                    <h3>ç”Ÿæˆçš„é—®é¢˜</h3>
                    <div class="json-data" id="result-content-3"></div>
                </div>
            </div>

            <!-- ç¬”è®°æ¶¦è‰² -->
            <div class="section" id="section-4">
                <h2>âœ¨ ç¬¬å››æ­¥ï¼šå†…å®¹æ¶¦è‰² - ä¼˜åŒ–è¡¨è¾¾</h2>
                <p style="color: #666; margin-bottom: 30px;">è®©AIå¸®ä½ ä¼˜åŒ–ç¬”è®°å’Œè¡¨è¾¾ï¼Œè®©å†…å®¹æ›´æœ‰è¶£æ›´æ˜“æ‡‚ï¼</p>

                <div class="form-group">
                    <label for="raw-content">åŸå§‹å†…å®¹</label>
                    <textarea id="raw-content" placeholder="è¾“å…¥ä½ æƒ³æ¶¦è‰²çš„å†…å®¹">æˆ‘çœ‹åˆ°äº†ä¸€ä¸ªä¸‰è§’é¾™çš„åŒ–çŸ³ï¼Œå®ƒæœ‰ä¸‰åªè§’å’Œå¾ˆå¤§çš„è„–å­éª¨æ¿ã€‚çœ‹èµ·æ¥å¾ˆå‰å®³çš„æ ·å­ï¼Œæˆ‘æƒ³çŸ¥é“å®ƒæ˜¯æ€ä¹ˆç”Ÿæ´»çš„ï¼Œåƒä»€ä¹ˆä¸œè¥¿ï¼Œæœ‰ä»€ä¹ˆæœ‹å‹ã€‚</textarea>
                </div>

                <div class="form-group">
                    <label for="polish-context">ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆJSONæ ¼å¼ï¼Œå¯é€‰ï¼‰</label>
                    <textarea id="polish-context" placeholder='{"age": 8, "interest": "æé¾™", "learning_goal": "äº†è§£å¤ç”Ÿç‰©"}'>{"age": 8, "interest": "æé¾™", "learning_goal": "äº†è§£å¤ç”Ÿç‰©çŸ¥è¯†"}</textarea>
                </div>

                <button class="btn" onclick="polishNote()">æ¶¦è‰²å†…å®¹</button>

                <div class="result" id="result-4">
                    <h3>æ¶¦è‰²ç»“æœ</h3>
                    <div class="json-data" id="result-content-4"></div>
                </div>
            </div>

            <!-- è¯­éŸ³è½¬æ–‡å­— -->
            <div class="section" id="section-5">
                <h2>ğŸ¤ ç¬¬äº”æ­¥ï¼šè¯­éŸ³äº¤äº’ - è¯­éŸ³è½¬æ–‡å­—</h2>
                <p style="color: #666; margin-bottom: 30px;">ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶ï¼Œè®©AIå¸®ä½ è½¬æ¢ä¸ºæ–‡å­—ï¼</p>

                <div class="form-group">
                    <label>é€‰æ‹©éŸ³é¢‘æ–‡ä»¶</label>
                    <div class="file-upload" id="audio-upload">
                        <input type="file" id="audio-file" accept="audio/*" onchange="handleAudioSelect(this)">
                        <div class="upload-text">ğŸµ ç‚¹å‡»é€‰æ‹©éŸ³é¢‘æˆ–æ‹–æ‹½åˆ°æ­¤å¤„</div>
                        <div class="upload-hint">æ”¯æŒ MP3ã€WAVã€M4A ç­‰æ ¼å¼</div>
                    </div>
                    <div id="audio-preview" style="margin-top: 20px; display: none;">
                        <audio id="preview-audio" controls style="width: 100%; max-width: 400px;"></audio>
                    </div>
                </div>

                <div class="form-group">
                    <label for="audio-language">éŸ³é¢‘è¯­è¨€</label>
                    <select id="audio-language">
                        <option value="zh-CN" selected>ä¸­æ–‡</option>
                        <option value="en-US">è‹±æ–‡</option>
                        <option value="ja-JP">æ—¥æ–‡</option>
                    </select>
                </div>

                <button class="btn" onclick="speechToText()">è½¬æ¢æ–‡å­—</button>

                <div class="progress-bar" id="progress-5">
                    <div class="progress-fill"></div>
                </div>

                <div class="result" id="result-5">
                    <h3>è½¬æ¢ç»“æœ</h3>
                    <div class="json-data" id="result-content-5"></div>
                    <div class="media-player" id="audio-player" style="display: none;">
                        <h4>åŸå§‹éŸ³é¢‘</h4>
                        <audio id="result-audio" controls></audio>
                        <button class="btn download-btn" onclick="downloadMedia('audio')">ä¸‹è½½éŸ³é¢‘</button>
                    </div>
                </div>
            </div>

            <!-- ç”ŸæˆæŠ¥å‘Š -->
            <div class="section" id="section-6">
                <h2>ğŸ“‹ ç¬¬å…­æ­¥ï¼šç”ŸæˆæŠ¥å‘Š - åˆ›å»ºç ”ç©¶æˆæœ</h2>
                <p style="color: #666; margin-bottom: 30px;">åŸºäºæ‰€æœ‰æ¢ç´¢å†…å®¹ï¼Œç”Ÿæˆä¸€ä»½å®Œæ•´çš„å­¦ä¹ æŠ¥å‘Šï¼</p>

                <div class="form-group">
                    <label for="report-context">æŠ¥å‘Šå†…å®¹æ€»ç»“</label>
                    <textarea id="report-context" placeholder="æ€»ç»“ä½ çš„æ¢ç´¢å‘ç°å’Œå­¦ä¹ å¿ƒå¾—">é€šè¿‡è¿™æ¬¡æé¾™æ¢ç´¢ä¹‹æ—…ï¼Œæˆ‘å­¦ä¹ åˆ°äº†å¾ˆå¤šå…³äºä¸‰è§’é¾™çš„çŸ¥è¯†ã€‚å®ƒä»¬ç”Ÿæ´»åœ¨ç™½å©çºªæ™šæœŸï¼Œæ˜¯è‰é£Ÿæ€§æé¾™ï¼Œæœ‰ä¸‰åªè§’å’Œé¢ˆéƒ¨éª¨æ¿æ¥ä¿æŠ¤è‡ªå·±ã€‚æˆ‘è¿˜å­¦ä¼šäº†å¦‚ä½•è§‚å¯ŸåŒ–çŸ³å’Œæå‡ºé—®é¢˜ã€‚</textarea>
                </div>

                <div class="form-group">
                    <label for="learning-goals">å­¦ä¹ ç›®æ ‡</label>
                    <textarea id="learning-goals" placeholder="æè¿°ä½ çš„å­¦ä¹ ç›®æ ‡">äº†è§£æé¾™çš„åŸºæœ¬ç‰¹å¾ï¼Œå­¦ä¹ è§‚å¯Ÿå’Œæé—®çš„æ–¹æ³•ï¼ŒåŸ¹å…»ç§‘å­¦æ¢ç´¢ç²¾ç¥ã€‚</textarea>
                </div>

                <button class="btn" onclick="generateReport()">ç”ŸæˆæŠ¥å‘Š</button>

                <div class="result" id="result-6">
                    <h3>ç ”ç©¶æŠ¥å‘Š</h3>
                    <div class="json-data" id="result-content-6"></div>
                </div>
            </div>

            <!-- è§†é¢‘åˆ†æ -->
            <div class="section" id="section-7">
                <h2>ğŸ¥ ç¬¬ä¸ƒæ­¥ï¼šè§†é¢‘åˆ†æ - AIåˆ†æè§†é¢‘å†…å®¹</h2>
                <p style="color: #666; margin-bottom: 30px;">ä¸Šä¼ è§†é¢‘æ–‡ä»¶ï¼Œè®©AIå¸®ä½ åˆ†æå…¶ä¸­çš„å†…å®¹ã€åœºæ™¯å’Œæƒ…æ„Ÿï¼</p>

                <div class="form-group">
                    <label>é€‰æ‹©è§†é¢‘æ–‡ä»¶</label>
                    <div class="file-upload" id="video-upload">
                        <input type="file" id="video-file" accept="video/*" onchange="handleVideoSelect(this)">
                        <div class="upload-text">ğŸ¬ ç‚¹å‡»é€‰æ‹©è§†é¢‘æˆ–æ‹–æ‹½åˆ°æ­¤å¤„</div>
                        <div class="upload-hint">æ”¯æŒ MP4ã€AVIã€MOV ç­‰æ ¼å¼</div>
                    </div>
                    <div id="video-preview" style="margin-top: 20px; display: none;">
                        <video id="preview-video" controls style="max-width: 400px; max-height: 300px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);"></video>
                    </div>
                </div>

                <button class="btn" onclick="analyzeVideo()">å¼€å§‹åˆ†æ</button>

                <div class="progress-bar" id="progress-7">
                    <div class="progress-fill"></div>
                </div>

                <div class="result" id="result-7">
                    <h3>è§†é¢‘åˆ†æç»“æœ</h3>
                    <div class="json-data" id="result-content-7"></div>
                </div>
            </div>

            <!-- è§†é¢‘ç”Ÿæˆ -->
            <div class="section" id="section-8">
                <h2>ğŸ¬ ç¬¬å…«æ­¥ï¼šè§†é¢‘åˆ›ä½œ - ç”ŸæˆAIæ•™å­¦è§†é¢‘</h2>
                <p style="color: #666; margin-bottom: 30px;">è®©AIåŸºäºä½ çš„æ¢ç´¢å†…å®¹ï¼Œç”Ÿæˆä¸€æ®µæ•™å­¦è§†é¢‘ï¼</p>

                <div class="form-group">
                    <label for="video-script">è§†é¢‘è„šæœ¬</label>
                    <textarea id="video-script" placeholder="è¾“å…¥è§†é¢‘è„šæœ¬å†…å®¹">æ¬¢è¿æ¥åˆ°æé¾™ä¸–ç•Œï¼ä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ ä¸‰è§’é¾™ã€‚ä¸‰è§’é¾™æ˜¯ç”Ÿæ´»åœ¨ç™½å©çºªæ™šæœŸçš„è‰é£Ÿæ€§æé¾™ï¼Œå®ƒä»¬æœ‰ä¸‰åªè§’å’Œé¢ˆéƒ¨å¤§éª¨æ¿ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢ä¸‰è§’é¾™çš„å¥¥ç§˜å§ï¼</textarea>
                </div>

                <div class="form-group">
                    <label for="video-style">è§†é¢‘é£æ ¼</label>
                    <select id="video-style">
                        <option value="educational" selected>æ•™è‚²é£æ ¼</option>
                        <option value="cartoon">å¡é€šé£æ ¼</option>
                        <option value="documentary">çºªå½•ç‰‡é£æ ¼</option>
                        <option value="adventure">å†’é™©é£æ ¼</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="video-duration">è§†é¢‘æ—¶é•¿ï¼ˆç§’ï¼‰</label>
                    <input type="number" id="video-duration" value="60" min="30" max="300">
                </div>

                <div class="form-group">
                    <label for="video-scenes">åœºæ™¯æè¿°ï¼ˆæ¯è¡Œä¸€ä¸ªåœºæ™¯ï¼‰</label>
                    <textarea id="video-scenes" placeholder="è¾“å…¥åœºæ™¯æè¿°">ä¸‰è§’é¾™å¤–å½¢ä»‹ç»&#10;ç”Ÿæ´»ä¹ æ€§å±•ç¤º&#10;ç”Ÿå­˜ç¯å¢ƒå†ç°</textarea>
                </div>

                <div class="form-group">
                    <label for="video-voice">è¯­éŸ³ç±»å‹</label>
                    <select id="video-voice">
                        <option value="female" selected>å¥³å£°</option>
                        <option value="male">ç”·å£°</option>
                    </select>
                </div>

                <button class="btn" onclick="generateVideo()">ç”Ÿæˆè§†é¢‘</button>

                <div class="progress-bar" id="progress-8">
                    <div class="progress-fill"></div>
                </div>

                <div class="result" id="result-8">
                    <h3>è§†é¢‘ç”Ÿæˆç»“æœ</h3>
                    <div class="json-data" id="result-content-8"></div>
                    <div class="media-player" id="video-player" style="display: none;">
                        <h4>ç”Ÿæˆçš„è§†é¢‘</h4>
                        <video id="result-video" controls></video>
                        <button class="btn download-btn" onclick="downloadMedia('video')">ä¸‹è½½è§†é¢‘</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentStep = 1;
        let projectData = null;
        let observationData = null;
        let selectedImageFile = null;
        let selectedAudioFile = null;
        let selectedVideoFile = null;
        let generatedAudioData = null;
        let generatedVideoData = null;

        // APIåŸºç¡€URL
        const API_BASE = 'http://localhost:9003';

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initSteps();
            initDragAndDrop();
        });

        // åˆå§‹åŒ–æ­¥éª¤
        function initSteps() {
            const steps = document.querySelectorAll('.step');
            steps.forEach(step => {
                step.addEventListener('click', function() {
                    const stepNum = parseInt(this.dataset.step);
                    switchStep(stepNum);
                });
            });
        }

        // åˆå§‹åŒ–æ‹–æ‹½ä¸Šä¼ 
        function initDragAndDrop() {
            // å›¾ç‰‡ä¸Šä¼ 
            const imageUpload = document.getElementById('image-upload');
            imageUpload.addEventListener('dragover', handleDragOver);
            imageUpload.addEventListener('dragleave', handleDragLeave);
            imageUpload.addEventListener('drop', (e) => handleImageDrop(e));

            // éŸ³é¢‘ä¸Šä¼ 
            const audioUpload = document.getElementById('audio-upload');
            audioUpload.addEventListener('dragover', handleDragOver);
            audioUpload.addEventListener('dragleave', handleDragLeave);
            audioUpload.addEventListener('drop', (e) => handleAudioDrop(e));

            // è§†é¢‘ä¸Šä¼ 
            const videoUpload = document.getElementById('video-upload');
            videoUpload.addEventListener('dragover', handleDragOver);
            videoUpload.addEventListener('dragleave', handleDragLeave);
            videoUpload.addEventListener('drop', (e) => handleVideoDrop(e));
        }

        // åˆ‡æ¢æ­¥éª¤
        function switchStep(stepNum) {
            // æ›´æ–°æ­¥éª¤çŠ¶æ€
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            document.querySelector(`[data-step="${stepNum}"]`).classList.add('active');

            // åˆ‡æ¢å†…å®¹åŒºåŸŸ
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`section-${stepNum}`).classList.add('active');

            currentStep = stepNum;
        }

        // æ‹–æ‹½äº‹ä»¶å¤„ç†
        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
        }

        // æ–‡ä»¶é€‰æ‹©å¤„ç†
        function handleFileSelect(input) {
            selectedImageFile = input.files[0];
            if (selectedImageFile) {
                displayImagePreview(selectedImageFile);
            }
        }

        function handleAudioSelect(input) {
            selectedAudioFile = input.files[0];
            if (selectedAudioFile) {
                displayAudioPreview(selectedAudioFile);
            }
        }

        function handleVideoSelect(input) {
            selectedVideoFile = input.files[0];
            if (selectedVideoFile) {
                displayVideoPreview(selectedVideoFile);
            }
        }

        // æ‹–æ‹½æ–‡ä»¶å¤„ç†
        function handleImageDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');

            const files = e.dataTransfer.files;
            if (files.length > 0) {
                selectedImageFile = files[0];
                document.getElementById('image-file').files = files;
                displayImagePreview(selectedImageFile);
            }
        }

        function handleAudioDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');

            const files = e.dataTransfer.files;
            if (files.length > 0) {
                selectedAudioFile = files[0];
                document.getElementById('audio-file').files = files;
                displayAudioPreview(selectedAudioFile);
            }
        }

        function handleVideoDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');

            const files = e.dataTransfer.files;
            if (files.length > 0) {
                selectedVideoFile = files[0];
                document.getElementById('video-file').files = files;
                displayVideoPreview(selectedVideoFile);
            }
        }

        // æ˜¾ç¤ºå›¾ç‰‡é¢„è§ˆ
        function displayImagePreview(file) {
            const preview = document.getElementById('image-preview');
            const img = document.getElementById('preview-img');

            const reader = new FileReader();
            reader.onload = function(e) {
                img.src = e.target.result;
                preview.style.display = 'block';
            };
            reader.readAsDataURL(file);
        }

        // æ˜¾ç¤ºéŸ³é¢‘é¢„è§ˆ
        function displayAudioPreview(file) {
            const preview = document.getElementById('audio-preview');
            const audio = document.getElementById('preview-audio');

            const reader = new FileReader();
            reader.onload = function(e) {
                audio.src = e.target.result;
                preview.style.display = 'block';
            };
            reader.readAsDataURL(file);
        }

        // æ˜¾ç¤ºè§†é¢‘é¢„è§ˆ
        function displayVideoPreview(file) {
            const preview = document.getElementById('video-preview');
            const video = document.getElementById('preview-video');

            const reader = new FileReader();
            reader.onload = function(e) {
                video.src = e.target.result;
                preview.style.display = 'block';
            };
            reader.readAsDataURL(file);
        }

        // APIè°ƒç”¨å‡½æ•°
        async function createProject() {
            const title = document.getElementById('project-title').value;
            const description = document.getElementById('project-desc').value;
            const category = document.getElementById('project-category').value;
            const tags = document.getElementById('project-tags').value.split(',').map(tag => tag.trim());

            const data = {
                user_id: 1,
                title: title,
                description: description,
                category: category,
                tags: tags
            };

            try {
                const response = await fetch(`${API_BASE}/api/project/create`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                projectData = result.data;

                document.getElementById('result-content-1').textContent = JSON.stringify(result, null, 2);
                document.getElementById('result-1').classList.add('show');

                // è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€æ­¥
                setTimeout(() => switchStep(2), 2000);
            } catch (error) {
                showError('åˆ›å»ºé¡¹ç›®å¤±è´¥: ' + error.message);
            }
        }

        async function analyzeImage() {
            if (!selectedImageFile) {
                showError('è¯·å…ˆé€‰æ‹©å›¾ç‰‡æ–‡ä»¶');
                return;
            }

            const prompt = document.getElementById('analysis-prompt').value;

            // æ˜¾ç¤ºè¿›åº¦æ¡
            const progressBar = document.getElementById('progress-2');
            const progressFill = progressBar.querySelector('.progress-fill');
            progressBar.classList.add('show');

            try {
                // å°†æ–‡ä»¶è½¬æ¢ä¸ºbase64
                const base64Data = await fileToBase64(selectedImageFile);
                const imageUrl = `data:${selectedImageFile.type};base64,${base64Data}`;

                const data = {
                    project_id: projectData?.project_id || 1,
                    user_id: 1,
                    image_url: imageUrl,
                    prompt: prompt,
                    category: document.getElementById('project-category').value
                };

                // æ¨¡æ‹Ÿè¿›åº¦
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 10;
                    progressFill.style.width = progress + '%';
                    if (progress >= 90) clearInterval(progressInterval);
                }, 200);

                const response = await fetch(`${API_BASE}/api/observation/image/recognize`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                observationData = result;

                progressFill.style.width = '100%';
                setTimeout(() => progressBar.classList.remove('show'), 1000);

                document.getElementById('result-content-2').textContent = JSON.stringify(result, null, 2);
                document.getElementById('result-2').classList.add('show');

                // è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€æ­¥
                setTimeout(() => switchStep(3), 3000);
            } catch (error) {
                document.getElementById('progress-2').classList.remove('show');
                showError('å›¾ç‰‡åˆ†æå¤±è´¥: ' + error.message);
            }
        }

        async function generateQuestions() {
            const userAge = parseInt(document.getElementById('user-age').value);
            const contextInfo = document.getElementById('context-info').value;

            const data = {
                project_id: projectData?.project_id || 1,
                user_id: 1,
                observation_id: observationData?.observation_id || 1,
                context_info: contextInfo,
                category: document.getElementById('project-category').value,
                user_age: userAge
            };

            try {
                const response = await fetch(`${API_BASE}/api/questioning/questions/generate`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                document.getElementById('result-content-3').textContent = JSON.stringify(result, null, 2);
                document.getElementById('result-3').classList.add('show');

                // è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€æ­¥
                setTimeout(() => switchStep(4), 2000);
            } catch (error) {
                showError('ç”Ÿæˆé—®é¢˜å¤±è´¥: ' + error.message);
            }
        }

        async function polishNote() {
            const rawContent = document.getElementById('raw-content').value;
            const contextInfoStr = document.getElementById('polish-context').value;

            let contextInfo = {};
            try {
                contextInfo = JSON.parse(contextInfoStr);
            } catch (e) {
                contextInfo = { raw_context: contextInfoStr };
            }

            const data = {
                raw_content: rawContent,
                context_info: contextInfo,
                category: document.getElementById('project-category').value,
                user_age: parseInt(document.getElementById('user-age').value)
            };

            try {
                const response = await fetch(`${API_BASE}/api/expression/note/polish`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                document.getElementById('result-content-4').textContent = JSON.stringify(result, null, 2);
                document.getElementById('result-4').classList.add('show');

                // è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€æ­¥
                setTimeout(() => switchStep(5), 2000);
            } catch (error) {
                showError('å†…å®¹æ¶¦è‰²å¤±è´¥: ' + error.message);
            }
        }

        async function speechToText() {
            if (!selectedAudioFile) {
                showError('è¯·å…ˆé€‰æ‹©éŸ³é¢‘æ–‡ä»¶');
                return;
            }

            const language = document.getElementById('audio-language').value;

            // æ˜¾ç¤ºè¿›åº¦æ¡
            const progressBar = document.getElementById('progress-5');
            const progressFill = progressBar.querySelector('.progress-fill');
            progressBar.classList.add('show');

            try {
                // å°†æ–‡ä»¶è½¬æ¢ä¸ºbase64
                const base64Data = await fileToBase64(selectedAudioFile);

                const data = {
                    audio_data: base64Data,
                    format: selectedAudioFile.name.split('.').pop().toLowerCase(),
                    language: language
                };

                // æ¨¡æ‹Ÿè¿›åº¦
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 8;
                    progressFill.style.width = progress + '%';
                    if (progress >= 90) clearInterval(progressInterval);
                }, 300);

                const response = await fetch(`${API_BASE}/api/expression/speech-to-text`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                progressFill.style.width = '100%';
                setTimeout(() => progressBar.classList.remove('show'), 1000);

                document.getElementById('result-content-5').textContent = JSON.stringify(result, null, 2);
                document.getElementById('result-5').classList.add('show');

                // è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€æ­¥
                setTimeout(() => switchStep(6), 2000);
            } catch (error) {
                document.getElementById('progress-5').classList.remove('show');
                showError('è¯­éŸ³è½¬æ¢å¤±è´¥: ' + error.message);
            }
        }

        async function generateReport() {
            const context = document.getElementById('report-context').value;
            const goals = document.getElementById('learning-goals').value;

            const data = {
                project_id: projectData?.project_id || 1,
                user_id: 1,
                context_info: {
                    content: context,
                    learning_goals: goals,
                    category: document.getElementById('project-category').value
                }
            };

            try {
                const response = await fetch(`${API_BASE}/api/achievement/report/generate`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                document.getElementById('result-content-6').textContent = JSON.stringify(result, null, 2);
                document.getElementById('result-6').classList.add('show');

                // è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€æ­¥
                setTimeout(() => switchStep(7), 2000);
            } catch (error) {
                showError('ç”ŸæˆæŠ¥å‘Šå¤±è´¥: ' + error.message);
            }
        }

        async function analyzeVideo() {
            if (!selectedVideoFile) {
                showError('è¯·å…ˆé€‰æ‹©è§†é¢‘æ–‡ä»¶');
                return;
            }

            // æ˜¾ç¤ºè¿›åº¦æ¡
            const progressBar = document.getElementById('progress-7');
            const progressFill = progressBar.querySelector('.progress-fill');
            progressBar.classList.add('show');

            try {
                // å°†æ–‡ä»¶è½¬æ¢ä¸ºbase64
                const base64Data = await fileToBase64(selectedVideoFile);

                const data = {
                    video_data: base64Data,
                    format: selectedVideoFile.name.split('.').pop().toLowerCase()
                };

                // æ¨¡æ‹Ÿè¿›åº¦
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 5;
                    progressFill.style.width = progress + '%';
                    if (progress >= 90) clearInterval(progressInterval);
                }, 500);

                const response = await fetch(`${API_BASE}/api/achievement/video/analyze`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                progressFill.style.width = '100%';
                setTimeout(() => progressBar.classList.remove('show'), 1000);

                document.getElementById('result-content-7').textContent = JSON.stringify(result, null, 2);
                document.getElementById('result-7').classList.add('show');

                // è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€æ­¥
                setTimeout(() => switchStep(8), 3000);
            } catch (error) {
                document.getElementById('progress-7').classList.remove('show');
                showError('è§†é¢‘åˆ†æå¤±è´¥: ' + error.message);
            }
        }

        async function generateVideo() {
            const script = document.getElementById('video-script').value;
            const style = document.getElementById('video-style').value;
            const duration = parseFloat(document.getElementById('video-duration').value);
            const scenes = document.getElementById('video-scenes').value.split('\n').filter(s => s.trim());
            const voice = document.getElementById('video-voice').value;
            const language = 'zh-CN';

            const data = {
                script: script,
                style: style,
                duration: duration,
                scenes: scenes,
                voice: voice,
                language: language
            };

            // æ˜¾ç¤ºè¿›åº¦æ¡
            const progressBar = document.getElementById('progress-8');
            const progressFill = progressBar.querySelector('.progress-fill');
            progressBar.classList.add('show');

            try {
                // æ¨¡æ‹Ÿè¿›åº¦ï¼ˆè§†é¢‘ç”Ÿæˆéœ€è¦æ—¶é—´ï¼‰
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 2;
                    progressFill.style.width = progress + '%';
                    if (progress >= 95) clearInterval(progressInterval);
                }, 1000);

                const response = await fetch(`${API_BASE}/api/achievement/video/generate`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                progressFill.style.width = '100%';
                setTimeout(() => progressBar.classList.remove('show'), 1000);

                document.getElementById('result-content-8').textContent = JSON.stringify(result, null, 2);
                document.getElementById('result-8').classList.add('show');

                // å¦‚æœæœ‰è§†é¢‘æ•°æ®ï¼Œæ˜¾ç¤ºæ’­æ”¾å™¨
                if (result.data && result.data.video_data) {
                    generatedVideoData = result.data.video_data;
                    displayGeneratedVideo(generatedVideoData, result.data.format || 'mp4');
                }

            } catch (error) {
                document.getElementById('progress-8').classList.remove('show');
                showError('è§†é¢‘ç”Ÿæˆå¤±è´¥: ' + error.message);
            }
        }

        // å·¥å…·å‡½æ•°
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => {
                    // ç§»é™¤data:xxx;base64,å‰ç¼€
                    const base64 = reader.result.split(',')[1];
                    resolve(base64);
                };
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        function displayGeneratedVideo(videoData, format) {
            const player = document.getElementById('video-player');
            const video = document.getElementById('result-video');

            // å‡è®¾è¿”å›çš„æ˜¯base64ç¼–ç çš„è§†é¢‘æ•°æ®
            video.src = `data:video/${format};base64,${videoData}`;
            player.style.display = 'block';
        }

        function downloadMedia(type) {
            let data, filename, mimeType;

            if (type === 'audio' && generatedAudioData) {
                data = generatedAudioData;
                filename = 'generated_audio.mp3';
                mimeType = 'audio/mp3';
            } else if (type === 'video' && generatedVideoData) {
                data = generatedVideoData;
                filename = 'generated_video.mp4';
                mimeType = 'video/mp4';
            } else {
                showError('æ²¡æœ‰å¯ä¸‹è½½çš„åª’ä½“æ–‡ä»¶');
                return;
            }

            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const blob = new Blob([Uint8Array.from(atob(data), c => c.charCodeAt(0))], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function showError(message) {
            // ç§»é™¤ç°æœ‰çš„é”™è¯¯ä¿¡æ¯
            const existingErrors = document.querySelectorAll('.error');
            existingErrors.forEach(error => error.remove());

            // åˆ›å»ºæ–°çš„é”™è¯¯ä¿¡æ¯
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error show';
            errorDiv.innerHTML = `<strong>é”™è¯¯ï¼š</strong>${message}`;

            // æ·»åŠ åˆ°å½“å‰æ´»åŠ¨æ­¥éª¤ä¸­
            const activeSection = document.querySelector('.section.active');
            activeSection.appendChild(errorDiv);

            // 3ç§’åè‡ªåŠ¨éšè—
            setTimeout(() => {
                errorDiv.classList.remove('show');
                setTimeout(() => errorDiv.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>
